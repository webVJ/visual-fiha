author: ''
title: ''
clock:
  bpm: 120
audio:
  stream: ''
signals:
  beatA:
    type: beat
    defaultValue: 1
    parameters: []
mappings: {}
layers:
  canvas:
    type: canvas
    layerStyles: ''
    updateFunction: |
      ctx.clearRect(0, 0, width, height);
      var l = bufferLength();
      var f = 0;
      var k = 3;
      var p = Math.max(1, k);
      var d = Math.pow(2, p);

      grid(l, l / d, function(...args) {
        var ff = Math.round((l * 0.125) + (f * 0.125));
        ctx.strokeStyle = 'hsl(' + frq(ff) + ', 100%, 50%)';
        var sides = Math.round(frq(ff) * (1 / 10));
        sides = Math.min(sides, 10);
        sides = Math.max(sides, 3);
        ctx.lineWidth = 10 - sides;
        circle(...args, vol(ff) * 0.25);
        polygone(...args, vol(ff) + 50, sides);
        f++;
      });
    parameters:
      - name: active
        type: boolean
        value: true
        default: true
      - name: clear
        type: number
        value: 1
        default: 1
      - name: zIndex
        type: number
        value: 0
        default: 0
